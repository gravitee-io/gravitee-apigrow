(window.webpackJsonp=window.webpackJsonp||[]).push([[195],{1009:function(e,t){},1010:function(e,t){},2353:function(e,t,n){"use strict";n.r(t);var a=n(34),r=n.n(a),o=n(59),i=n(109),c=n(16),s=n(17),l=n(20),d=n(19),p=n(21),u=n(0),h=n.n(u),m=n(56),f=n(70),g=n(1975),b=n(1015),y=n.n(b),v=n(270),x=n(9),k=n(886),C=n(745),E=n(697),w=n(889),P=n.n(w),N=n(1056),O=n(1053),S=n(681),j=n.n(S),T=n(891),I=n.n(T),K=n(1055),M=n(796),D=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).plusSignHandler=function(e){return e.stopPropagation(),n.props.addNewChildNode(n.props.nodeKey),e},n.mainNodeLeftPlusSignHandler=function(e){return e.stopPropagation(),n.props.addNewChildNode(n.props.nodeKey,"left"),e},n.onDragStart=function(e){return e.stopPropagation(),n.props.onDragStart(n.props.name,n.props.nodeKey),e},n.onDragStopRight=function(e){return e.stopPropagation(),n.props.onDragStop(n.props.nodeKey,"right"),e},n.onDragStopLeft=function(e){return e.stopPropagation(),n.props.onDragStop(n.props.nodeKey,"left"),e},n.onDragStopAbove=function(e){return e.stopPropagation(),n.props.onDragStop(n.props.nodeKey,"above"),e},n.onDragStopBelow=function(e){return e.stopPropagation(),n.props.onDragStop(n.props.nodeKey,"below"),e},n.nodeTextLength=function(){return 9*n.props.name.length},n.handleLeftClick=function(){n.props.onNodeSelect(n.props.node.data)},n.handleRightClick=function(e){n.props.onNodeSelect(n.props.node.data),n.props.openContextMenu(e)},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"createNode",value:function(){if(!this.props.parent)return h.a.createElement("svg",{className:"svg-rect",width:this.nodeTextLength()+6,height:"30",y:"-10"},h.a.createElement("rect",{className:this.props.currentNode.nodeKey===this.props[this.props.keyProp]?"selected-node":"main-node",width:this.nodeTextLength()+6,height:30}),h.a.createElement("text",{x:"50%",y:"50%",textAnchor:"middle",dy:".3em",textDecoration:"underline",className:"node"},"/",this.props.name));var e=("reference"===this.props.type&&this.props.isArray?"[":"")+("reference"===this.props.type?"#":"")+(!0===this.props.isSubPath?"/":"")+("array"===this.props.type?"[":"")+("operation"===this.props.type?"_":"")+this.props.name+("array"===this.props.type?"]":"")+("reference"===this.props.type&&this.props.isArray?"]":"");return h.a.createElement("g",null,h.a.createElement("rect",{className:0===this.nodeTextLength()?"error-node":"noerror-node",width:25,height:20,y:"-17",x:"left"===this.props.direction?-25:0}),h.a.createElement("rect",{className:this.props.currentNode.nodeKey===this.props[this.props.keyProp]?"selected-node":"unselected-node",width:this.nodeTextLength(),height:20,y:"-17",x:"left"===this.props.direction?-this.nodeTextLength():0}),h.a.createElement("text",Object.assign({textAnchor:"right"===this.props.direction?"start":"end"},this.props.textProps,{className:"node",fontStyle:"operation"===this.props.type?"italic":"normal",fill:"operation"===this.props.type?"CornflowerBlue":"black",textDecoration:!0===this.props.isSubPath?"underline":"",fontWeight:!0===this.props.abstract?"bold":""}),e),h.a.createElement("circle",{r:"10",className:this.props.isDraggingMoving?"active":"inactive",cy:"-13",cx:"left"===this.props.direction?-this.nodeTextLength()/2:this.nodeTextLength()/2,onMouseUp:this.onDragStopAbove}),h.a.createElement("circle",{r:"10",className:this.props.isDraggingMoving?"active":"inactive",cy:"7",cx:"left"===this.props.direction?-this.nodeTextLength()/2:this.nodeTextLength()/2,onMouseUp:this.onDragStopBelow}))}},{key:"render",value:function(){var e,t=this;return null===this.props.parent&&(e=h.a.createElement("g",{onClick:this.mainNodeLeftPlusSignHandler},h.a.createElement("rect",{className:"plussign",width:"11",height:"11",y:"0",x:"-8"}),h.a.createElement("text",{className:"plussign",y:"11",x:"-7"},"+"))),h.a.createElement("g",Object.assign({},this.props.gProps,{transform:"translate(".concat(this.props.y,", ").concat(this.props.x-5,")"),onContextMenu:function(e){return t.handleRightClick(e)},onMouseDown:null!==this.props.parent?this.onDragStart:null}),h.a.createElement("g",{className:"allnodes",onClick:this.handleLeftClick},this.createNode(),h.a.createElement("circle",{r:"10",className:!this.props.isDraggingMoving||"left"!==this.props.direction&&null!==this.props.parent?"inactive":"active",cy:"-3",cx:-20-("left"===this.props.direction?this.nodeTextLength():0),onMouseUp:this.onDragStopLeft}),h.a.createElement("circle",{r:"10",className:this.props.isDraggingMoving&&"right"===this.props.direction?"active":"inactive",cy:"-3",cx:("right"===this.props.direction?this.nodeTextLength():0)+20,onMouseUp:this.onDragStopRight}),e,"reference"!==this.props.type&&h.a.createElement("g",{onClick:this.plusSignHandler},h.a.createElement("rect",{className:this.props.isDraggingMoving?"plussign-dragging":"plussign",width:"11",height:"11",y:"0",x:"right"===this.props.direction?this.nodeTextLength():-8-this.nodeTextLength()}),h.a.createElement("text",{className:this.props.isDraggingMoving?"plussign-dragging":"plussign",y:"11",x:"right"===this.props.direction?1+this.nodeTextLength():-7-this.nodeTextLength()},"+"))))}}]),t}(u.Component),L=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return h.a.createElement("ul",{className:"custom-ul",id:"container-menu"},"reference"!==this.props.currentNode.type&&h.a.createElement("li",{"data-action":"addChild",onClick:this.props.insert},"Add Child")||h.a.createElement("li",{"data-action":"open",onClick:this.props.open},"Open"),h.a.createElement("li",{"data-action":"copy",onClick:this.props.copy},"Copy"),h.a.createElement("li",{"data-action":"cut",onClick:this.props.cut},"Cut"),h.a.createElement("li",{"data-action":"paste",onClick:this.props.paste},"Paste"),h.a.createElement("li",{"data-action":"delete",onClick:this.props.delete},"Delete"))}}]),t}(u.PureComponent),R=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).openNodeContextMenu=function(e){e.preventDefault(),n.nodeContext=!0,n.setState({showContext:!0,contextContainerStyle:{display:"block",top:"".concat(e.clientY,"px"),left:"".concat(e.clientX,"px")}})},n.closeContextMenu=function(){n.setState({showContext:!1})},n.onWheelScroll=function(e){var t=n.state.zoom;e.deltaY<0?(t*=1.1)>3&&(t=3):(t*=.94)<.4&&(t=.4),n.setState({zoom:t})},n.onDragStart=function(e,t){n.setState({isPaning:!1,isDragging:!0,isDraggingMoving:!1,draggedNodeKey:t})},n.onDragStop=function(e,t){n.setState({isPaning:!1,isDragging:!1,isDraggingMoving:!1}),n.props.moveNode(n.state.draggedNodeKey,e,t)},n.onPanStart=function(e){var t="undefined"===typeof e.clientX?e.changedTouches[0].clientX:e.clientX,a="undefined"===typeof e.clientY?e.changedTouches[0].clientY:e.clientY;n.setState({isPaning:!0,isDragging:!1,startX:t,startY:a})},n.onPanMove=function(e){if(n.state.isDragging)n.setState({isDraggingMoving:!0});else if(n.state.isPaning){var t="undefined"===typeof e.clientX?e.changedTouches[0].clientX:e.clientX,a="undefined"===typeof e.clientY?e.changedTouches[0].clientY:e.clientY;n.setState({panX:n.state.panX+t-n.state.startX,panY:n.state.panY+a-n.state.startY,startX:t,startY:a})}},n.onPanEnd=function(){n.setState({isPaning:!1,isDragging:!1,isDraggingMoving:!1})},n.state={panX:0,panY:0,zoom:.7,isPaning:!1,isDragging:!1,isDraggingMoving:!1,showContext:!1,contextContainerStyle:{}},n.nodeContext=!1,n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.keydown;t.event&&this.props.onKeyPress({keydown:t})}},{key:"componentDidUpdate",value:function(e){e.isFocus!==this.props.isFocus&&this.props.isFocus&&this.mindmap&&this.mindmap.focus()}},{key:"render",value:function(){var e=this;return h.a.createElement("div",{tabIndex:"0",id:"mindmap",onClick:this.closeContextMenu,onFocus:function(){return e.props.onFocus()},ref:function(t){e.mindmap=t}},h.a.createElement("div",{className:"custom-menu",id:"context-container",style:this.state.contextContainerStyle},this.state.showContext&&h.a.createElement(L,this.props)),h.a.createElement("svg",{viewBox:"".concat(this.props.minX," ").concat(this.props.minY," ").concat(this.props.maxX-this.props.minX+this.props.nodeWidth+1," ").concat(this.props.maxY-this.props.minY+1),className:"custom",onMouseDown:this.onPanStart,onMouseMove:this.onPanMove,onMouseLeave:this.onPanEnd,onMouseUp:this.onPanEnd,onWheel:this.onWheelScroll,style:{pointerEvents:"auto",height:"100%"}},h.a.createElement("g",{transform:" translate(".concat(this.state.panX," ").concat(this.state.panY,") scale(").concat(this.state.zoom,") ")},this.props.links.map((function(t){return h.a.createElement(M.a,{colorScheme:t.target.data.name.charCodeAt(0),branchColor:t.target.data.branchColor,isDottedLine:t.target.data.notImplemented,key:t.target.data[e.props.keyProp],keyProp:e.props.keyProp,source:t.source,target:t.target,x1:t.source.x,x2:t.target.x,y1:t.source.y+(t.source.data.parent?("right"===t.source.data.direction&&"right"===t.target.data.direction?9*t.source.data.name.length:0)-("left"===t.source.data.direction&&"left"===t.target.data.direction?9*t.source.data.name.length:0):4.5*t.source.data.name.length),y2:t.target.y,pathProps:Object(i.a)({},e.props.pathProps,t.target.data.pathProps),linkData:t})})),this.props.nodes.filter((function(e){return e.data.nodeKey})).map((function(t){return h.a.createElement("g",{key:t.data.nodeKey},h.a.createElement(M.a,{branchColor:t.data.branchColor,isDottedLine:t.data.notImplemented,x1:t.x,x2:t.x,y1:t.y+("right"===t.data.direction?9*t.data.name.length:0),y2:t.y-("left"===t.data.direction?9*t.data.name.length:0),pathProps:Object(i.a)({},e.props.pathProps,t.data.pathProps)}),h.a.createElement(D,Object.assign({node:t,currentNode:e.props.currentNode,onNodeSelect:e.props.onNodeSelect,addNewChildNode:e.props.addNewChildNode,onDragStart:e.onDragStart,onDragStop:e.onDragStop,openContextMenu:e.openNodeContextMenu,isDraggingMoving:e.state.isDraggingMoving,key:t.data[e.props.keyProp],keyProp:e.props.keyProp,labelProp:e.props.labelProp,x:t.x,y:t.y,Width:e.props.nodeWidth,gProps:Object(i.a)({},e.props.gProps,t.data.gProps),textProps:Object(i.a)({},e.props.textProps,t.data.textProps)},t.data)))})))))}}]),t}(u.Component),A=Object(K.a)(R),F=function(e){function t(e){var n;if(Object(c.a)(this,t),n=Object(l.a)(this,Object(d.a)(t).call(this,e)),e.animated){var a=e.nodes[0].x,r=e.nodes[0].y;n.state={nodes:e.nodes.map((function(e){return Object(i.a)({},e,{x:a,y:r})})),links:e.links.map((function(e){return{source:Object(i.a)({},e.source,{x:a,y:r}),target:Object(i.a)({},e.target,{x:a,y:r})}}))}}else n.state={nodes:e.nodes,links:e.links};return n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.animated&&this.animate(this.props)}},{key:"getAnimationContext",value:function(e,t){var n=this,a=t.nodes.filter((function(t){return e.nodes.every((function(e){return!n.areNodesSame(t,e)}))})).map((function(a){return{base:a,old:n.getClosestAncestor(a,t,e),new:a}})),r=t.nodes.filter((function(t){return e.nodes.some((function(e){return n.areNodesSame(t,e)}))})).map((function(t){return{base:t,old:e.nodes.find((function(e){return n.areNodesSame(t,e)})),new:t}})),o=e.nodes.filter((function(e){return t.nodes.every((function(t){return!n.areNodesSame(e,t)}))})).map((function(a){return{base:a,old:a,new:n.getClosestAncestor(a,e,t)}})),i=t.links.filter((function(t){return e.links.every((function(e){return!n.areLinksSame(t,e)}))})).map((function(a){return{base:a,old:n.getClosestAncestor(a.target,t,e),new:a}})),c=t.links.filter((function(t){return e.links.some((function(e){return n.areLinksSame(t,e)}))})).map((function(t){return{base:t,old:e.links.find((function(e){return n.areLinksSame(t,e)})),new:t}})),s=e.links.filter((function(e){return t.links.every((function(t){return!n.areLinksSame(e,t)}))})).map((function(a){return{base:a,old:a,new:n.getClosestAncestor(a.target,e,t)}}));return{nodes:r.concat(a).concat(o),links:c.concat(i).concat(s)}}},{key:"getClosestAncestor",value:function(e,t,n){for(var a=this,r=e;r;){var o=n.nodes.find((function(e){return a.areNodesSame(r,e)}));if(o)return o;r=t.nodes.find((function(e){return(a.props.getChildren(e)||[]).some((function(e){return a.areNodesSame(r,e)}))}))}return n.nodes[0]}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.nodes===this.props.nodes&&e.links===this.props.links||(e.animated?this.animate(e):this.setState({nodes:e.nodes,links:e.links}))}},{key:"animate",value:function(e){var t=this;clearInterval(this.animation);var n=0,a=this.getAnimationContext(this.state,e);this.animation=setInterval((function(){if((n+=1)===e.steps)return clearInterval(t.animation),t.animation=null,void t.setState({nodes:e.nodes,links:e.links});t.setState(t.calculateNewState(a,n/e.steps))}),e.duration/e.steps)}},{key:"areNodesSame",value:function(e,t){return e.data[this.props.keyProp]===t.data[this.props.keyProp]}},{key:"areLinksSame",value:function(e,t){return e.source.data[this.props.keyProp]===t.source.data[this.props.keyProp]&&e.target.data[this.props.keyProp]===t.target.data[this.props.keyProp]}},{key:"calculateNewState",value:function(e,t){var n=this;return{nodes:e.nodes.map((function(e){return n.calculateNodePosition(e.base,e.old,e.new,t)})),links:e.links.map((function(e){return n.calculateLinkPosition(e.base,e.old,e.new,t)}))}}},{key:"calculateNodePosition",value:function(e,t,n,a){return Object(i.a)({},e,{x:this.calculateNewValue(t.x,n.x,a),y:this.calculateNewValue(t.y,n.y,a)})}},{key:"calculateLinkPosition",value:function(e,t,n,a){return{source:Object(i.a)({},e.source,{x:this.calculateNewValue(t.source?t.source.x:t.x,n.source?n.source.x:n.x,a),y:this.calculateNewValue(t.source?t.source.y:t.y,n.source?n.source.y:n.y,a)}),target:Object(i.a)({},e.target,{x:this.calculateNewValue(t.target?t.target.x:t.x,n.target?n.target.x:n.x,a),y:this.calculateNewValue(t.target?t.target.y:t.y,n.target?n.target.y:n.y,a)})}}},{key:"calculateNewValue",value:function(e,t,n){return e+(t-e)*this.props.easing(n)}},{key:"render",value:function(){return h.a.createElement(A,Object.assign({},this.props,this.state))}}]),t}(u.Component),z=n(669),H=n(682),U={animated:!1,duration:50,easing:N.a,getChildren:function(e){return e.children},steps:5,keyProp:"nodeKey",labelProp:"name",margins:{bottom:10,left:100,right:150,top:10},nodeWidth:100,gProps:{className:"node"},pathProps:{className:"link"},textProps:{}},B=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).previousStates=[],n.state={toCopyNodeKey:null,toCutNodeKey:null,event:"",fullScreen:!1,swaggerHtml:""},n.keyHandler=function(e){var t=e.keydown;t.event&&(113===t.event.which&&n.f2Key(),40===t.event.which&&n.downKeyHandler(),38===t.event.which&&n.upKeyHandler(),37===t.event.which&&n.leftKeyHandler(),39===t.event.which&&n.rightKeyHandler(),66===t.event.which&&t.event.ctrlKey&&n.boldHandler(),67===t.event.which&&t.event.ctrlKey&&n.copyHandler(),88===t.event.which&&t.event.ctrlKey&&n.cutHandler(),86===t.event.which&&t.event.ctrlKey&&n.pasteHandler(),(90===t.event.which&&t.event.ctrlKey||90===t.event.which&&t.event.metaKey)&&n.props.onUndo(),13===t.event.which&&n.enterKeyHandler(),45===t.event.which&&n.insertKeyHandler(),46!==t.event.which&&8!==t.event.which||n.deleteKeyHandler(),t.event.which>=65&&t.event.which<=90&&!t.event.ctrlKey&&!t.event.metaKey&&n.props.onLetterDown())},n.updateChildrenParentLinks=function(e,t){e&&e.length>0&&e.forEach((function(e){e.parent=t}))},n.moveNode=function(e,t,a){if(t&&e&&e!==t&&!Object(H.e)(e,t,n.props.data)){var r=Object(H.b)(n.props.data,null,!1),o=Object(H.g)(t,r),i=Object(H.g)(e,r);if(i.parent){var c=Object(H.g)(i.parent,r);if(c.children.splice(c.children.findIndex((function(t){return t.nodeKey===e})),1),"left"===a||"right"===a){var s=Object(H.b)(i,o.nodeKey);s.direction=a,o.children.push(s),n.updateChildrenParentLinks(s.children,s.nodeKey),n.props.onTreeUpdate({dataUpdated:r,currentNode:s})}if(("above"===a||"below"===a)&&o.parent){var l=Object(H.g)(o.parent,r),d=l.children.findIndex((function(e){return e.nodeKey===t})),p=Object(H.b)(i,o.parent);l.children.splice("above"===a?d:d+1,0,p),p.direction=o.direction,n.updateChildrenParentLinks(p.children,p.nodeKey),n.props.onTreeUpdate({dataUpdated:r,currentNode:p})}}}},n.getTreeDepthAndCardinality=function(e,t){n.cardinality+=1,n.maxDepth<t&&(n.maxDepth=t),0!==e.children.length&&e.children.forEach((function(e){return n.getTreeDepthAndCardinality(e,t+1)}))},n.getTreeTextWidth=function(e,t,a){if(0!==e.children.length){var r=e.children.map((function(e){return n.getTreeTextWidth(e,t+e.name.length)}));return Math.max.apply(Math,Object(E.a)(r))}return e.name&&a>t+e.name.length?t+e.name.length:0===e.children.length?0:a},n.propagateDirection=function(e,t){e.direction=t,e.children.forEach((function(e){n.propagateDirection(e,t)}))},n.propagateShiftLeft=function(e,t){var a=10*e.data.name.length;0===e.depth&&(a=0),e.y+=t,e.children&&e.children.forEach((function(e){n.propagateShiftLeft(e,t+a)}))},n.propagateShiftRight=function(e,t){var a=10*e.data.name.length;e.children&&e.children.forEach((function(e){e.y+=t+a,n.propagateShiftRight(e,t+a)}))},n.nodePlacementAdaptation=function(e,t){if(e.parent&&e.parent.parent){var a=0;e.parent.parent.children.forEach((function(e){e.data.name.length>a&&(a=e.data.name.length)})),t+=a,e.y+=9*(t-e.parent.data.name.length*(1+.11*(e.depth-1)))}return e.children&&(e.children=e.children.map((function(e){return n.nodePlacementAdaptation(e,t)}))),e},n.addNewChildNode=function(e,t){var a=Object(H.a)(n.props.data,e,t),r=a.data,o=a.selectedNodeKey,i=a.node;r&&o&&i&&n.props.onTreeUpdate({dataUpdated:r,currentNode:i})},n.openReferenceHandler=function(){z.a.getModel(n.props.currentNode.referenceId).then((function(e){"0"===e.freezeTag?n.props.history.push({pathname:"/tree",state:{modelId:n.props.currentNode.referenceId}}):n.props.history.push({pathname:"/tree-frozen",state:{model:e}})}))},n.insertKeyHandler=function(){"reference"!==n.props.currentNode.type&&n.addNewChildNode(n.props.currentNode.nodeKey,null)},n.deleteKeyHandler=function(){if(n.props.currentNode.nodeKey){var e=Object(H.b)(n.props.data,null,!1),t=Object(H.g)(n.props.currentNode.nodeKey,e);if(t.parent){var a=Object(H.g)(t.parent,e);a.children.splice(a.children.findIndex((function(e){return e.nodeKey===n.props.currentNode.nodeKey})),1),n.props.onTreeUpdate({dataUpdated:e,currentNode:a})}}},n.copyHandler=function(){n.props.currentNode.nodeKey&&n.setState({toCopyNodeKey:n.props.currentNode.nodeKey,toCutNodeKey:null})},n.cutHandler=function(){n.props.currentNode.nodeKey&&n.setState({toCopyNodeKey:null,toCutNodeKey:n.props.currentNode.nodeKey})},n.pasteHandler=function(){var e=Object(H.b)(n.props.data,null,!1);if(n.props.currentNode.nodeKey){var t=Object(H.g)(n.props.currentNode.nodeKey,e);if(n.state.toCutNodeKey&&!Object(H.e)(n.state.toCutNodeKey,n.props.currentNode.nodeKey,n.props.data)){var a=Object(H.g)(n.state.toCutNodeKey,e),r=Object(H.b)(a,t.nodeKey),o=Object(H.g)(a.parent,e);o.children.splice(o.children.findIndex((function(e){return e.nodeKey===n.state.toCutNodeKey})),1),t.children.push(r),n.props.onTreeUpdate({dataUpdated:e,currentNode:r})}if(n.state.toCopyNodeKey){var i=Object(H.g)(n.state.toCopyNodeKey,e);if(i.parent){var c=Object(H.b)(i,t.nodeKey);t.children.push(c),n.props.onTreeUpdate({dataUpdated:e,currentNode:c})}}}},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"sanitizeNode",value:function(e){Object.keys(e).forEach((function(t){e[t]&&I.a.isString(e[t])&&e[t].indexOf('"')>-1&&(e[t]=e[t].replace('"',""))}))}},{key:"boldHandler",value:function(){this.props.onToolsMenuChange({abstract:!this.props.currentNode.abstract})}},{key:"enterKeyHandler",value:function(){if(this.props.currentNode.nodeKey){var e=Object(H.b)(this.props.data,null,!1),t=Object(H.g)(this.props.currentNode.nodeKey,e);if(t.parent){var n=Object(H.g)(t.parent,e),a=n.children.indexOf(t),r=j()(),o={name:"",parent:n.nodeKey,children:[],nodeKey:r,type:"string",referenceId:"",isArray:!1,example:"",abstract:!1,description:"",queryParams:"",direction:t.direction,queryable:!1,paginable:!1,isInPostResponse:!1,patchable:!1,notImplemented:!1,isSubPath:!1,calculated:!1,branchColor:n.branchColor};n.children.splice(a+1,0,o),this.props.onTreeUpdate({dataUpdated:e,currentNode:o})}}}},{key:"upKeyHandler",value:function(){if(this.props.currentNode.nodeKey){var e=this.props.data,t=Object(H.g)(this.props.currentNode.nodeKey,e);if(t.parent)for(var n=Object(H.g)(t.parent,e),a=n.children.indexOf(t)-1;a>=0;a-=1)if(n.children[a].direction===t.direction){this.props.onNodeSelect(n.children[a],e);break}}}},{key:"downKeyHandler",value:function(){if(this.props.currentNode.nodeKey){var e=this.props.data,t=Object(H.g)(this.props.currentNode.nodeKey,e);if(t.parent){var n,a=Object(H.g)(t.parent,e);for(n=a.children.indexOf(t)+1;n<a.children.length;n+=1)if(a.children[n].direction===t.direction){this.props.onNodeSelect(a.children[n],e);break}}}}},{key:"leftKeyHandler",value:function(){if(this.props.currentNode.nodeKey){var e=this.props.data,t=Object(H.g)(this.props.currentNode.nodeKey,e);if(t.nodeKey===this.props.data.nodeKey){var n=t.children.findIndex((function(e){return"left"===e.direction}));-1!==n&&this.props.onNodeSelect(t.children[n],e)}else"right"===t.direction?this.goToParent(t,e):this.goToFirstChild(t,e)}}},{key:"rightKeyHandler",value:function(){if(this.props.currentNode.nodeKey){var e=this.props.data,t=Object(H.g)(this.props.currentNode.nodeKey,e);"left"===t.direction?this.goToParent(t,e):this.goToFirstChild(t,e)}}},{key:"goToParent",value:function(e,t){if(e.parent){var n=Object(H.g)(e.parent,t);this.props.onNodeSelect(n,t)}}},{key:"goToFirstChild",value:function(e,t){if(e.children&&e.children.length>0){var n=e.children.findIndex((function(t){return t.direction===e.direction}));-1!==n&&this.props.onNodeSelect(e.children[n],t)}}},{key:"render",value:function(){var e=this,t=this.props,n=t.isFocus,a=t.onNodeSelect,r=t.children,o=t.data,i=t.margins,c=600+10*(this.getTreeTextWidth({children:o.children.filter((function(e){return"left"===e.direction}))},0,120)+this.getTreeTextWidth({children:o.children.filter((function(e){return"right"===e.direction}))},0,120))-i.left-i.right;this.maxDepth=0,this.cardinality=0,this.getTreeDepthAndCardinality(o,0);var s=200+60*(this.cardinality+1)/(this.maxDepth+1)-i.top-i.bottom;o.children.forEach((function(t){e.propagateDirection(t,t.direction)}));var l=P()(o);l.children=l.children.filter((function(e){return"left"===e.direction})),this.propagateDirection(l,"left");var d=Object(O.b)().size([s,c/2])(Object(O.a)(l)),p=(d=this.nodePlacementAdaptation(d,0)).descendants(),u=d.links();this.propagateShiftLeft(p[0],0);var m=P()(o);m.children=m.children.filter((function(e){return"right"===e.direction})),this.propagateDirection(m,"right",0);var f=Object(O.b)().size([s,c/2])(Object(O.a)(m)),g=(f=this.nodePlacementAdaptation(f,0)).descendants(),b=f.links();this.propagateShiftRight(g[0],0);var y=g[0].x-p[0].x;p.forEach((function(e){e.x+=y,e.y=-e.y})),u.forEach((function(e){e.source.data.nodeKey===p[0].data.nodeKey&&(e.source=g[0]),e.target.data.nodeKey===p[0].data.nodeKey&&(e.target=g[0])})),p.splice(0,1);var v=p.concat(g),x=u.concat(b),k=g[0].x,C=g[0].x,E=g[0].y,w=g[0].y;v.forEach((function(e){k>e.x&&(k=e.x),C<e.x&&(C=e.x),E>e.y&&(E=e.y),w<e.y&&(w=e.y)}));var N=(k+C)/2;return v.forEach((function(e){e.x-=N})),C-=N,k-=N,E-=100,h.a.createElement(F,Object.assign({},this.props,this.state,{minY:k,maxY:C,minX:E,maxX:w,links:x,nodes:v,centerX:v[0].y,centerY:v[0].x,cardinality:this.cardinality,open:function(){return e.openReferenceHandler()},insert:function(){return e.insertKeyHandler()},copy:function(){return e.copyHandler()},cut:function(){return e.cutHandler()},paste:function(){return e.pasteHandler()},delete:function(){return e.deleteKeyHandler()},moveNode:this.moveNode,addNewChildNode:this.addNewChildNode,onSaveTree:this.saveTree,onKeyPress:this.keyHandler,onNodeSelect:a,isFocus:n}),r)}}]),t}(u.Component);B.defaultProps=U;var q=n(47),Y=n(604),W=n(606),X=n(596),V=n(597),G=n(605),_=n(635),J=n(269),Q=n(598),Z=n(875),$=n(633),ee=n(627),te=n(628),ne=n(556),ae=n(933),re=n(815),oe=n.n(re),ie=n(816),ce=n.n(ie),se=n(1097),le=n(8),de=n(247),pe=n(626),ue=n(632),he=Object(de.a)({overrides:{MuiIconButton:{root:{fontSize:"1rem"},label:{display:"block"}}}}),me=Object(pe.a)({root:{"&:hover":{backgroundColor:"transparent"}},icon:function(e){return{fontSize:"15px",fontWeight:"bold",borderRadius:30,display:"table-cell",border:"3px solid ".concat(e.customcolor),color:e.customcolor,width:90,height:30,"input:hover ~ &":{backgroundColor:"#ebf1f5"},"input:disabled ~ &":{background:"rgba(206,217,224,.5)"},boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)"}},checkedIcon:function(e){return{borderRadius:30,display:"table-cell",border:"3px solid ".concat(e.customcolor),color:"white",backgroundColor:"".concat(e.customcolor),width:90,height:30,"input:hover ~ &":{backgroundColor:"#ebf1f5"},boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)"}}});function fe(e){var t=me(e);return h.a.createElement(h.a.Fragment,null,h.a.createElement(ue.a,{theme:he},h.a.createElement(Z.a,Object.assign({className:t.root,checkedIcon:h.a.createElement("span",{className:Object(le.a)(t.icon,t.checkedIcon)},e.label),icon:h.a.createElement("span",{className:t.icon},e.label)},e))))}function ge(e){return h.a.createElement("div",{style:{margin:"auto"}},h.a.createElement(fe,e))}var be=function(){return{margin:{margin:"auto"},editContainer:{overflowY:"auto",overflowX:"hidden",padding:"10px !important",backgroundColor:"white",width:"20%",minWidth:"20%",zIndex:10},fieldContainer:{padding:"10px",display:"grid"},formControl:{margin:"10px"},formLabel:{margin:"auto",fontSize:"1.4em",padding:"10px"},ExpansionPanelDetails:{display:"grid"},hideEditIcon:{color:"#324157",width:"fit-content",marginBottom:"10px"},hideIconContainer:{width:"100%",display:"flex",justifyContent:"flex-end"},referencePaper:{padding:"20px",display:"inline-grid",margin:"10px"}}},ye=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={models:[]},n.onCheckBoxChange=function(e){var t=e.target,a=Object(q.a)({},t.name,t.checked);n.props.onToolsMenuChange(a)},n.onInversedCheckBoxChange=function(e){var t=e.target,a=Object(q.a)({},t.name,!t.checked);n.props.onToolsMenuChange(a)},n.onVerbButtonClick=function(e){var t={verbs:[e.target.name]};n.props.onToolsMenuChange(t)},n.onNodeTypeChange=function(e){var t=e.target,a=Object(q.a)({},t.name,t.value);"reference"===t.value&&(a.referenceId=n.state.models[0].id,a.children=[]),n.props.onToolsMenuChange(a)},n.onTextFieldChange=function(e){var t=e.target,a=Object(q.a)({},t.name,t.value);n.props.onToolsMenuChange(a)},n.onDropDownChange=function(e){var t=e.target,a=Object(q.a)({},t.name,t.value);n.props.onToolsMenuChange(a)},n.onBranchColorChange=function(e){var t={branchColor:e.hex};n.props.onToolsMenuChange(t)},n.onSubpathCheckboxChange=function(e){var t=e.target,a={isSubPath:t.checked};t.checked&&(a.verbs=["SEARCH","POST","PUT","GET","DELETE"]),n.props.onToolsMenuChange(a)},n.handleChange=function(e){return function(t){n.setState(Object(i.a)({},e,Object(q.a)({},e,t.target.checked)))}},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;z.a.getModels({organization:this.props.organization,pageSize:0}).then((function(t){e.setState({models:t.data.data.filter((function(t){return t.id!==e.props.modelId}))})}))}},{key:"componentDidUpdate",value:function(e){this.props.isFocus!==e.isFocus&&this.nameInput&&this.nameInput.focus()}},{key:"render",value:function(){var e=this,t=this.props,n=t.node,a=t.classes,r=t.data,o=t.onEditClick;n.patchable=!!n.patchable,n.notImplemented=!!n.notImplemented,n.xDescription=n.xDescription||"",n.verbs=n.verbs||["SEARCH","POST","PUT","GET","DELETE"],n.branchColor=n.branchColor||"#FCB900",n.verbs=n.verbs.filter((function(e){return"UPDATE"!==e}));var i=Object(H.d)(n,r),c=Object(H.c)(n,r);return h.a.createElement("div",{className:a.editContainer},h.a.createElement("div",{className:a.fieldContainer},h.a.createElement("div",{className:a.hideIconContainer},h.a.createElement(v.a,{id:"editHideButton",onClick:o,className:a.hideEditIcon},h.a.createElement(oe.a,null))),h.a.createElement("label",{className:"title-menu"},"Edit attribute"),h.a.createElement(Y.a,{title:"Name of the attribute. Special case: if you specify comma-separated words, they'll serve as a list of possible values for the parent",placement:"right"},h.a.createElement(W.a,{disabled:!n.parent,InputLabelProps:{shrink:!0},id:"outlined-email-input",label:"Label",name:"name",margin:"normal",variant:"outlined",onChange:this.onTextFieldChange,onKeyDown:function(t){13===t.keyCode&&e.props.onEnterDown()},className:"item-sidepanel",value:n.name,inputRef:function(t){e.nameInput=t}})),n.parent&&h.a.createElement(h.a.Fragment,null,h.a.createElement(Y.a,{title:"A description to help developer who will use the API",placement:"right"},h.a.createElement(W.a,{multiline:!0,disabled:!n.parent,InputLabelProps:{shrink:!0},id:"outlined-textarea",label:"Description",name:"description",margin:"normal",variant:"outlined",onChange:this.onTextFieldChange,className:"item-sidepanel",value:n.description})),h.a.createElement(Y.a,{title:"The description that isn't public or included in the specification but only displayed to help API",placement:"right"},h.a.createElement(W.a,{multiline:!0,disabled:!n.parent,InputLabelProps:{shrink:!0},id:"outlined-email-input",label:"Example",type:"example",name:"example",autoComplete:"example",margin:"normal",variant:"outlined",onChange:this.onTextFieldChange,className:"item-sidepanel",value:n.example})),h.a.createElement(X.a,{disabled:!n.parent,variant:"outlined",margin:"normal"},h.a.createElement(V.a,{ref:function(t){e.InputLabelRef=t},htmlFor:"type-select"},"Type"),h.a.createElement(G.a,{className:"dropdown",native:!0,value:n.type,onChange:this.onNodeTypeChange,input:h.a.createElement(_.a,{name:"type",labelWidth:35,id:"type-select"})},h.a.createElement("option",{value:"integer"},"integer"),h.a.createElement("option",{value:"number"},"number"),h.a.createElement("option",{value:"string"},"text"),h.a.createElement("option",{value:"boolean"},"boolean"),h.a.createElement("option",{value:"array"},"list"),h.a.createElement("option",{value:"object"},"object"),h.a.createElement("option",{value:"operation"},"operation"),h.a.createElement("option",{value:"reference"},"reference to..."))),"reference"===n.type&&h.a.createElement(J.a,{className:a.referencePaper},h.a.createElement(Q.a,null,"Reference"),h.a.createElement(X.a,{variant:"outlined",margin:"normal"},h.a.createElement(V.a,{ref:function(t){e.InputLabelRef=t},htmlFor:"reference-select"},"Model"),h.a.createElement(G.a,{className:"dropdown",native:!0,value:n.referenceId,onChange:this.onDropDownChange,input:h.a.createElement(_.a,{name:"referenceId",labelWidth:45,id:"reference-select"})},this.state.models.map((function(e){return h.a.createElement("option",{key:e.id,value:e.id},"".concat(e.name).concat("0"!==e.freezeTag?" (frozen)":""))})))),h.a.createElement(Y.a,{title:"Determine if the reference model should be a simple object or an array",placement:"right"},h.a.createElement("label",null,h.a.createElement(Z.a,{color:"default",onChange:this.onCheckBoxChange,type:"checkbox",name:"isArray",checked:n.isArray}),"Is Array")),h.a.createElement(h.a.Fragment,null,h.a.createElement(Y.a,{title:"Define branch color (with children)",placement:"right"},h.a.createElement("label",{style:{fontSize:"14px","padding-bottom":"10px"}},"Color Branch")),h.a.createElement(se.TwitterPicker,{color:n.branchColor,triangle:"hide",width:"auto",onChangeComplete:this.onBranchColorChange,style:{"padding-bottom":"20px",margin:"auto"}}))),"reference"!==n.type&&"operation"!==n.type&&!i&&h.a.createElement(Y.a,{title:"make this field searchable (include it in query params for searchs with GET /objects?field=...)",placement:"right"},h.a.createElement("label",null,h.a.createElement(Z.a,{disabled:!n.parent,color:"default",onChange:this.onCheckBoxChange,type:"checkbox",name:"queryable",checked:n.queryable}),"Searchable")),"operation"!==n.type&&!i&&h.a.createElement(Y.a,{title:"make this field appear in search results (reponse to GET /objects)",placement:"right"},h.a.createElement("label",null,h.a.createElement(Z.a,{disabled:!n.parent,color:"default",onChange:this.onCheckBoxChange,type:"checkbox",name:"abstract",checked:n.abstract}),"In abstract"))),"reference"!==n.type&&h.a.createElement($.a,null,h.a.createElement(ee.a,{expandIcon:h.a.createElement(ce.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},h.a.createElement(Q.a,{className:a.heading},"Advanced settings")),h.a.createElement(te.a,{className:a.ExpansionPanelDetails},h.a.createElement(h.a.Fragment,null,h.a.createElement(Y.a,{title:"Define color branch (with children)",placement:"right"},h.a.createElement("label",{style:{fontSize:"14px","padding-bottom":"10px"}},"Color branch")),h.a.createElement(se.TwitterPicker,{color:n.branchColor,triangle:"hide",width:"auto",onChangeComplete:this.onBranchColorChange,style:{"padding-bottom":"20px",margin:"auto"}})),n.parent&&!i&&h.a.createElement(h.a.Fragment,null,h.a.createElement(Y.a,{title:"Make a sub context for this field (will be accessible by GET /objects/thisfield).",placement:"right"},h.a.createElement("label",null,h.a.createElement(Z.a,{disabled:!n.parent,color:"default",onChange:this.onSubpathCheckboxChange,type:"checkbox",name:"isSubPath",checked:n.isSubPath}),"Subpath"))),n.parent&&!i&&!n.isSubPath&&h.a.createElement(h.a.Fragment,null,h.a.createElement(Y.a,{title:"When this box is checked, the attribute will be individually updatable. Otherwise, updates are only possible for all the fields together.",placement:"right"},h.a.createElement("label",null,h.a.createElement(Z.a,{disabled:!n.parent,color:"default",onChange:this.onCheckBoxChange,type:"checkbox",name:"patchable",checked:n.patchable}),"Partial update"))),n.parent&&h.a.createElement(h.a.Fragment,null,h.a.createElement(Y.a,{title:"Fields that are not yet implemented do not appear in the specification result",placement:"right"},h.a.createElement("label",{style:{fontSize:"14px"}},h.a.createElement(Z.a,{disabled:!n.parent,color:"default",onChange:this.onCheckBoxChange,type:"checkbox",name:"notImplemented",checked:n.notImplemented}),"Not yet implemented"))),n.parent&&"operation"!==n.type&&!n.isSubPath&&h.a.createElement(h.a.Fragment,null,h.a.createElement(Y.a,{title:"This field will be present on request payload (POST body) at creation time if checked",placement:"right"},h.a.createElement("label",null,h.a.createElement(Z.a,{disabled:!n.parent,color:"default",onChange:this.onInversedCheckBoxChange,type:"checkbox",name:"calculated",checked:!n.calculated}),i?"In Operation Request":"Known on create"))),"operation"!==n.type&&!n.isSubPath&&n.parent&&(i||c)&&h.a.createElement(Y.a,{title:"make the field appear in POST responses",placement:"right"},h.a.createElement("label",null,h.a.createElement(Z.a,{color:"default",onChange:this.onCheckBoxChange,type:"checkbox",name:"isInPostResponse",checked:n.isInPostResponse}),i?"In Operation Response":"In Create Response")),"reference"!==n.type&&!i&&h.a.createElement(h.a.Fragment,null,h.a.createElement(Y.a,{title:"make the results paginated (adds the query parameters page & pageSize)",placement:"right"},h.a.createElement("label",null,h.a.createElement(Z.a,{disabled:(!n.isSubPath||"array"!==n.type)&&!!n.parent||!1,color:"default",onChange:this.onCheckBoxChange,type:"checkbox",name:"paginable",checked:n.paginable}),"Pagination")),h.a.createElement(Y.a,{title:"Optionally define here additionals query params, comma-separated. Those terms come in addition to the ones that are 'searchable'",placement:"right"},h.a.createElement(W.a,{disabled:(!n.isSubPath||"array"!==n.type)&&!!n.parent||!1,label:"Query Params",type:"queryParams",name:"queryParams",margin:"normal",variant:"outlined",onChange:this.onTextFieldChange,className:"item-sidepanel",value:n.queryParams||""})),h.a.createElement(Y.a,{title:"An optional, internal explanation for those who have to implement this API. For instance the database where to find the data for this attribute. (Not included in the public specification)",placement:"right"},h.a.createElement(W.a,{multiline:!0,disabled:!n.parent,InputLabelProps:{shrink:!0},id:"outlined-textarea",label:"Internal Description",name:"xDescription",margin:"normal",variant:"outlined",onChange:this.onTextFieldChange,className:"item-sidepanel",value:n.xDescription}))),(n.isSubPath||!n.parent)&&h.a.createElement(X.a,{component:"fieldset",className:a.formControl},h.a.createElement(ne.a,{className:a.formLabel,component:"legend"},"Operations"),h.a.createElement(ae.a,null,(!n.parent||"array"===n.type)&&h.a.createElement(ge,{customcolor:"#61affe",label:"SEARCH",name:"SEARCH",type:"checkbox",checked:n.verbs.includes("SEARCH"),onChange:this.onVerbButtonClick}),(!n.parent||"array"===n.type)&&h.a.createElement(ge,{customcolor:"#49cc90",label:"CREATE",name:"POST",type:"checkbox",checked:n.verbs.includes("POST"),onChange:this.onVerbButtonClick}),h.a.createElement(ge,{customcolor:"#61affe",label:"READ",name:"GET",type:"checkbox",checked:n.verbs.includes("GET"),onChange:this.onVerbButtonClick}),h.a.createElement(ge,{customcolor:"#fca130",label:"UPDATE",name:"PUT",type:"checkbox",checked:n.verbs.includes("PUT"),onChange:this.onVerbButtonClick}),(!n.parent||"array"===n.type)&&h.a.createElement(ge,{customcolor:"#f93e3e",label:"DELETE",name:"DELETE",type:"checkbox",checked:n.verbs.includes("DELETE"),onChange:this.onVerbButtonClick})))))))}}]),t}(u.Component),ve=Object(x.a)(be)(ye),xe=n(876),ke=n(709),Ce=n(857),Ee=n(33),we=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,s=new Array(a),p=0;p<a;p++)s[p]=arguments[p];return(n=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(s)))).state={history:[],saved:!0,canBeSaved:!1,currentNode:{nodeKey:""},data:{children:[],name:""},refinerRules:[],livePreviewSwagger:null,isLivePreviewOpen:!0,isEditMenuOpen:!0,focus:"tree",modelId:n.props.location.state?n.props.location.state.modelId:null,organizationId:n.props.location.state?n.props.location.state.organizationId:null},n.intervalId=null,n.onNodeSelect=function(e){n.setState({currentNode:Object(i.a)({},e)})},n.onTreeUpdate=function(e){var t=e.dataUpdated,a=e.currentNode,r=n.state,o=r.history,i=r.data;o.push(i),n.setState({data:t,currentNode:a,history:o,saved:!1}),n.requestLivePreview(t)},n.setModelLock=function(e){var t=n.state.modelId;z.a.setModelLock(t,e).catch((function(e){403===e.response.status?m.Notification.error({title:"Error",message:"You can only modify your own models. Please ask your team leader if you need a modification on this model."}):m.Notification.error({title:"Error",message:"Could not lock/unlock. Please log in"})}))},n.saveModel=function(e){var t=n.state,a=t.saved,r=t.modelId,o=t.data;if(!n.props.location.state.isPublic){if(a&&!e)return n.setModelLock(!0);if(a&&e)return n.setModelLock(!1);var i=!e;z.a.saveModel(r,{data:o},i).then((function(){n.setState({saved:!0})})).catch((function(e){403===e.response.status?m.Notification.error({title:"Error",message:"You can only modify your own models. Please ask your team leader if you need a modification on this model."}):m.Notification.error({title:"Error",message:"Could not save. Please log in"})}))}},n.onToolsMenuChange=function(e){var t=n.state,a=t.currentNode,r=t.data,o=n.state.history;if(e.verbs)if(a.verbs.includes(e.verbs[0])){var c={verbs:a.verbs.filter((function(t){return t!==e.verbs[0]}))};e.hasOwnProperty("isSubPath")&&(c.isSubPath=e.isSubPath),a=Object(i.a)({},a,c)}else{var s={verbs:a.verbs.concat(e.verbs)};e.hasOwnProperty("isSubPath")&&(s.isSubPath=e.isSubPath),a=Object(i.a)({},a,s)}else a=Object(i.a)({},a,e);r=Object(H.h)(r,a),o.push(r),n.setState({data:r,history:o,currentNode:a,saved:!1}),n.requestLivePreview(r)},n.onPreviewClick=function(){var e=n.state,t=e.isLivePreviewOpen,a=e.data;n.setState({isLivePreviewOpen:!t}),t||n.requestLivePreview(a)},n.onEditClick=function(){var e=n.state.isEditMenuOpen;n.setState({isEditMenuOpen:!e})},n.onPreviewClose=function(){n.setState({isLivePreviewOpen:!1})},n.onUndo=function(){var e=n.state.history;if(0!==e.length){var t=e.pop();n.setState({currentNode:t,data:t,history:e})}},n.setFocus=function(e){n.state.focus!==e&&n.setState({focus:e})},n.requestLivePreview=function(){var e=Object(o.a)(r.a.mark((function e(t){var a,o,i,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.state,o=a.isLivePreviewOpen,i=a.refinerRules,c=n.state.organizationId?n.state.organizationId:1,o&&Object(C.trackPromise)(ke.a.requestLivePreview({data:t,refinerRules:i},c).then((function(e){n.setState({livePreviewSwagger:e})})));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.location,a=t.history;if(n.state){var r=n.state,o=r.data,c=r.modelId;r.isPublic?this.setState({data:o,currentNode:Object(i.a)({},o)},(function(){e.saveModel(!1),e.requestLivePreview(e.state.data)})):z.a.getModel(c).then((function(t){e.setState({data:t.data,refinerRules:t.refinerRules||[],currentNode:Object(i.a)({},t.data),canBeSaved:!0},(function(){e.saveModel(!1),e.requestLivePreview(e.state.data)}))})),this.intervalId=setInterval((function(){e.state.canBeSaved&&e.saveModel(!1)}),1e4)}else a.push("/dashboard")}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalId),this.state.canBeSaved&&this.saveModel(!0)}},{key:"render",value:function(){var e=this,t=this.state,n=t.currentNode,a=t.data,r=t.focus,o=t.isLivePreviewOpen,i=t.isEditMenuOpen,c=t.livePreviewSwagger,s=this.props,l=s.classes,d=s.location,p=d.state?d.state.modelId:null,u=h.a.createElement(k.a,{direction:"w",handleClass:l.customHandle,borderClass:l.customResizeBorder,style:{position:"inherit",right:"0",width:"45%",maxWidth:"80%",zIndex:10}},h.a.createElement(xe.a,{swagger:c,onPreviewClick:this.onPreviewClick})),m="";return m=o?i?"small-tree":"left-half-tree":i?"right-half-tree":"full-tree",a?h.a.createElement("div",{className:l.svgContainer},h.a.createElement(g.a,{direction:"right",in:i,mountOnEnter:!0,unmountOnExit:!0},h.a.createElement(ve,{organization:this.state.organizationId,modelId:this.state.modelId,node:n,data:a,onToolsMenuChange:this.onToolsMenuChange,onEnterDown:function(){return e.setFocus("tree")},isFocus:"menu"===r,onEditClick:this.onEditClick})),h.a.createElement("div",{className:"relative-container ".concat(m)},(this.context.user.organizations,h.a.createElement(h.a.Fragment,null,h.a.createElement(B,Object.assign({},this.props,{animated:!0,data:a,modelId:p,currentNode:n,isFocus:"tree"===r,width:m,onNodeSelect:this.onNodeSelect,onToolsMenuChange:this.onToolsMenuChange,onTreeUpdate:this.onTreeUpdate,newModel:function(){return e.handleNewModelWarningOpen()},onLetterDown:function(){return e.setFocus("menu")},onFocus:function(){return e.setFocus("tree")},onUndo:this.onUndo}))))),h.a.createElement(g.a,{direction:"left",in:o,mountOnEnter:!0,unmountOnExit:!0},u),!o&&h.a.createElement(v.a,{id:"previewShowButton",color:"primary",onClick:function(){return e.onPreviewClick()},className:l.showIcon},h.a.createElement(y.a,null)),!i&&h.a.createElement(v.a,{id:"editShowButton",color:"primary",onClick:function(){return e.onEditClick()},className:l.showIconEdit},h.a.createElement(y.a,null))):null}}]),t}(u.Component);we.contextType=Ee.a;t.default=Object(f.g)(Object(x.a)(Ce.a)(we))},669:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(16),r=n(17),o=n(20),i=n(19),c=n(21),s=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,null,[{key:"getModelNames",value:function(e){var t=e?{params:{teamId:e}}:{};return this.execute("get","users/me/modelsList",t)}},{key:"getModels",value:function(e){return this.execute("get","users/me/models",{params:e},!0)}},{key:"getModelSwaggerAsFile",value:function(e,t){return this.execute("get","models/".concat(e,"/swagger?type=").concat(t))}},{key:"createModel",value:function(e,t){return this.execute("post","/models/",{data:{model:t,teamId:e}})}},{key:"getModel",value:function(e){return this.execute("get","/models/".concat(e))}},{key:"setModelLock",value:function(e,t){return t?this.execute("put","/models/".concat(e,"/lock")):this.execute("delete","/models/".concat(e,"/lock"))}},{key:"saveModel",value:function(e,t,n){return this.execute("put","/models/".concat(e,"?isLocked=").concat(n),{data:t})}},{key:"freezeModel",value:function(e){return this.execute("post","/models/".concat(e,"?action=freeze"))}},{key:"revertModel",value:function(e){return this.execute("post","/models/".concat(e,"?action=revert"))}},{key:"duplicateModel",value:function(e){return this.execute("post","/models/".concat(e,"?action=duplicate"))}},{key:"deleteModel",value:function(e){return this.execute("delete","/models/".concat(e))}},{key:"renameModel",value:function(e,t){return this.execute("patch","/models/".concat(e),{data:{name:t}})}},{key:"publishToApiManager",value:function(e){return this.execute("post","/models/".concat(e,"/gravitee"))}},{key:"changeOrganizationModel",value:function(e,t,n,a){return this.execute("patch","/models/".concat(e),{data:{tags:t,name:n,organizationId:a}})}},{key:"getModelRules",value:function(e){return this.execute("get","/models/".concat(e,"/refinerRules"))}},{key:"testModelRule",value:function(e,t){return this.execute("post","/models/".concat(e,"/refinerRules?testOnly=true"),{data:t})}},{key:"createModelRule",value:function(e,t){return this.execute("put","/models/".concat(e,"/refinerRules"),{data:t})}},{key:"updateModelRule",value:function(e,t,n){return this.execute("put","/models/".concat(e,"/refinerRules/").concat(t),{data:n})}},{key:"deleteModelRule",value:function(e,t){return this.execute("delete","/models/".concat(e,"/refinerRules/").concat(t))}}]),t}(n(40).a)},682:function(e,t,n){"use strict";n.d(t,"g",(function(){return c})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return u})),n.d(t,"f",(function(){return h})),n.d(t,"h",(function(){return g}));var a=n(109),r=n(697),o=n(681),i=n.n(o);function c(e,t){for(var n=[t];n.length;){var a=n.pop();if(a.nodeKey===e)return a;n.push.apply(n,Object(r.a)(a.children))}return n.pop()||null}function s(e,t){if("operation"===e.type)return!0;if(!0===e.isSubPath)return e.verbs.includes("POST");if(!e.parent)return e.verbs.includes("POST");var n=c(e.parent,t);return!!n&&s(n,t)}function l(e,t){if("operation"===e.type)return!0;if(!0===e.isSubPath)return!1;if(!e.parent)return!1;var n=c(e.parent,t);return!!n&&l(n,t)}function d(e,t,n){for(var a=c(t,n);a.nodeKey!==e&&a.parent;)a=c(a.parent,n);return a.nodeKey===e}function p(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return Object(a.a)({},e,{nodeKey:n?i()():e.nodeKey,parent:t,children:e.children.map((function(t){return p(t,e.nodeKey,n)}))})}function u(e,t,n){if(!t)return{};var a=p(e,null,!1),r=c(t,a),o=i()(),s={name:"",direction:n||r.direction,parent:r.nodeKey,children:[],nodeKey:o,type:"string",referenceId:"",isArray:!1,example:"",abstract:!0,description:"",queryable:!1,paginable:!1,isInPostResponse:!1,patchable:!1,notImplemented:!1,isSubPath:!1,verbs:[],calculated:!1,queryParams:"",branchColor:r.branchColor};switch(r.children.push(s),r.type){case"array":r.type="array";break;case"operation":r.type="operation";break;default:r.type="object"}return{data:a,selectedNodeKey:o,node:s}}function h(e){var t=i()();return{name:e,direction:"right",nodeKey:t,parent:null,description:"",example:"",type:"string",referenceId:"",isArray:!1,abstract:!0,queryable:!1,paginable:!1,isInPostResponse:!1,patchable:!1,notImplemented:!1,isSubPath:!1,calculated:!1,queryParams:"",verbs:["SEARCH","POST","GET","PUT","DELETE"],children:[{name:"id",direction:"right",description:"",type:"integer",referenceId:"",isArray:!1,abstract:!0,queryable:!1,paginable:!1,patchable:!1,notImplemented:!1,isInPostResponse:!1,isSubPath:!1,calculated:!0,example:"",parent:t,nodeKey:i()(),children:[]},{name:"an attribute",direction:"right",description:"",type:"integer",referenceId:"",isArray:!1,abstract:!0,queryable:!1,paginable:!1,patchable:!1,notImplemented:!1,isInPostResponse:!1,isSubPath:!1,calculated:!0,example:"",parent:t,nodeKey:i()(),children:[]}]}}function m(e,t){t(e),e.children&&e.children.length>0&&e.children.map((function(e){return m(e,t)}))}function f(e,t,n,a){if(n(t,a),t.parent){var r=c(t.parent,e);r&&f(e,r,n,a)}}function g(e,t){var n=p(e,null,!1),a=c(t.nodeKey,n);return a.name=t.name,a.description=t.description,a.xDescription=t.xDescription,a.example=t.example,a.type=t.type,a.referenceId=t.referenceId,a.isArray=t.isArray,a.queryable=t.queryable,a.isSubPath=t.isSubPath,a.calculated=t.calculated,a.isInPostResponse=t.isInPostResponse,a.paginable=t.paginable,a.patchable=t.patchable,a.queryParams=t.queryParams,a.verbs=t.verbs,a.parent=t.parent,"reference"===a.type&&(a.children=t.children),t.branchColor!==a.branchColor&&m(a,(function(e){e.branchColor=t.branchColor})),a.notImplemented!==t.notImplemented&&(t.notImplemented?m(a,(function(e){e.notImplemented=!0})):f(n,a,(function(e){e.notImplemented=!1}))),a.abstract!==t.abstract&&(t.abstract?f(n,a,(function(e){e.abstract=!0})):a.abstract=t.abstract),n}},709:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(16),r=n(17),o=n(20),i=n(19),c=n(21),s=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,null,[{key:"getResourcesFromUploaded",value:function(e){return this.execute("post","/swaggerUpload/resources",{data:{jsonstring:e}})}},{key:"getModelsFromResources",value:function(e){return this.execute("post","/swaggerUpload/models",{data:e})}},{key:"requestPreview",value:function(e){return this.execute("post","/swaggerPreviews",{data:e})}},{key:"requestLivePreview",value:function(e,t){return this.execute("post","/swaggerLivePreviews?organizationId=".concat(t),{data:e})}}]),t}(n(40).a)},796:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(16),r=n(17),o=n(20),i=n(19),c=n(21),s=n(0),l=n.n(s);var d=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e,t,n,a,r="";this.props.source?(e=this.props.x1,t=this.props.y1,n=this.props.x2,a=this.props.y2,r=this.props.source.data.parent?"M".concat(t,",").concat(e,"\n  C\n  ").concat((t+a)/2,",").concat(e,"\n  ").concat((t+a)/2,",").concat(n,"\n  ").concat(a,",").concat(n):"M".concat(t,",").concat(e,"\n    C\n    ").concat(t+(a-t)/3,",").concat((e+n)/2,"\n    ").concat((t+a)/2,",").concat(n,"\n    ").concat(a,",").concat(n)):r=function(e,t,n,a){return"M".concat(t,",").concat(e,"\n    C\n    ").concat((t+a)/2,",").concat(e,"\n    ").concat((t+a)/2,",").concat(n,"\n    ").concat(a,",").concat(n)}(this.props.x1,this.props.y1,this.props.x2,this.props.y2);var o=31&this.props.colorScheme,i=245+o/3,c=166+o,s=35+o,d=this.props.branchColor||"rgb(".concat(i,", ").concat(c,", ").concat(s,")");return l.a.createElement("path",Object.assign({style:{stroke:d}},this.props.pathProps,this.props.isDottedLine&&{"stroke-dasharray":"5, 5"},{d:r}))}}]),t}(s.PureComponent)},857:function(e,t,n){"use strict";t.a=function(){return{svgContainer:{flexGrow:3,display:"flex",flexFlow:"row nowrap",backgroundColor:"#ececec",height:"calc(100% - 64.237px)"},treeContainer:{position:"relative"},previewButton:{marginLeft:"50%",backgroundColor:"transparent",position:"fixed"},sideBarContainer:{display:"contents"},editButton:{backgroundColor:"#324157",borderRadius:"0"},toggleContainer:{},tabButton:{width:"fit-content",height:"40px"},optionMenu:{width:"250px",backgroundColor:"#e0e0e0",position:"absolute",zIndex:0,height:"100%"},headband:{display:"flex",position:"absolute",width:"-webkit-fill-available",color:"whitesmoke",padding:"0.5rem 1rem"},headbandFrozen:{backgroundColor:"#2a8dff"},headbandReadOnly:{backgroundColor:"#f2a436"},exportMenu:{width:"250px",backgroundColor:"#e0e0e0",position:"absolute",zIndex:0,height:"100%"},editIcon:{color:"white"},modalContainer:{backgroundColor:"#e0e0e0",width:"fit-content",position:"absolute",top:"50%",left:"50%",padding:"20px",transform:"translateY(-50%) translateX(-50%)",borderRadius:"10px",border:"solid 1px black",textAlign:"center"},formControl:{minWidth:"120px"},buttonSaveTeam:{margin:"10px"},customHandle:{cursor:"ew-resize",width:"5px",height:"100px",margin:"0px -5px",background:"#324157",borderRadius:"2px",textAlign:"center",zIndex:"999",overflow:"hidden",display:"flex",alignItems:"center"},customResizeBorder:{cursor:"ew-resize",width:"10px",background:"white",border:"1px solid #80808066",display:"flex",zIndex:"999",alignItems:"center",alignContent:"center",justifyContent:"center",overflow:"visible"},customFrozenMindmapZoom:{height:"94vh"},showIcon:{top:"0",right:"0",position:"absolute",marginTop:"80px",marginRight:"20px",color:"#2b8dff"},showIconFrozenTree:{top:"0",right:"0",position:"absolute",marginTop:"6rem",marginRight:"20px",color:"#2b8dff",zIndex:999},showIconEdit:{top:"0",left:"0",position:"absolute",marginTop:"80px",marginLeft:"20px",color:"#2b8dff"}}}},876:function(e,t,n){"use strict";var a=n(16),r=n(17),o=n(20),i=n(19),c=n(21),s=n(0),l=n.n(s),d=n(934),p=n(9),u=(n(1014),n(815)),h=n.n(u),m=n(270),f=n(110),g=n(745),b=n(737),y=n.n(b),v=(n(738),Object(p.a)((function(){return{loaderContainer:{width:"-webkit-fill-available",maxWidth:"50%%",height:"100%",display:"flex",backgroundColor:"#ffffff85",position:"fixed",zIndex:"10"},swaggerSpinner:{margin:"auto"}}}))((function(e){var t=Object(g.usePromiseTracker)().promiseInProgress,n=Object(s.useState)(""),a=Object(f.a)(n,2),r=a[0],o=a[1],i=e.classes;return!0===t&&setTimeout((function(){o(!0)}),0),!1===t&&setTimeout((function(){o(!1)}),2e3),r&&l.a.createElement("div",{className:i.loaderContainer},l.a.createElement(y.a,{className:i.swaggerSpinner,type:"TailSpin",color:"#324157",height:100,width:100,timeout:6e4}))}))),x=function(){return{spinner:{position:"absolute",margin:"auto",width:"fit-content",height:"fit-content"},hideIcon:{top:"0",left:"0",position:"absolute",margin:"20px",color:"#324157"}}},k=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.swagger,a=e.id,r=e.onPreviewClick;return l.a.createElement("div",{id:a,className:"right-tree"},n&&l.a.createElement(l.a.Fragment,null,l.a.createElement(v,{className:t.spinner}),l.a.createElement(m.a,{id:"previewHideButton",onClick:r,className:t.hideIcon},l.a.createElement(h.a,null)),l.a.createElement(d.a,{spec:n,docExpansion:"list",showExtensions:"true"})))}}]),t}(s.PureComponent);t.a=Object(p.a)(x)(k)}}]);
//# sourceMappingURL=195.931b2f5b.chunk.js.map