(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{2101:function(e,t,a){"use strict";a.r(t);var n=a(16),r=a(17),i=a(20),o=a(19),c=a(21),s=a(0),u=a.n(s),m=a(9),l=a(250),d=a(853),f=a(596),p=a(605),h=a(765),b=a(247),g=a(1951),E=a.n(g),O=a(56),w=a(868),j=a(632),x=a(2050),v=a.n(x),y=a(2062),R=a.n(y),C=a(2051),S=a.n(C),T=a(2060),k=a.n(T),M=a(2054),L=a.n(M),A=a(2052),N=a.n(A),P=a(2053),D=a.n(P),U=a(2055),z=a.n(U),F=a(2057),B=a.n(F),W=a(2058),I=a.n(W),J=a(2059),V=a.n(J),X=a(1004),Y=a.n(X),_=a(2056),q=a.n(_),G=a(2061),H=a.n(G),K=a(2063),Q=a.n(K),Z=a(38),$=Z.a.bodyContainer,ee=Z.a.centeredCtn,te=function(){return{bodyContainer:$,centeredCtn:ee,buttonAdd:{marginTop:"24px",width:"42px",height:"42px",minWidth:"0px",marginLeft:"4px",color:"white",backgroundColor:"#324157;"},buttonContact:{margin:"20px auto",display:"flex"},textContact:{margin:"20px auto",display:"flex"},titleContact:{margin:"20px auto",width:"500px",textAlign:"center"},dialogContent:{display:"grid",maxWidth:"700px"}}},ae=a(145),ne={Add:Object(s.forwardRef)((function(e,t){return u.a.createElement(v.a,Object.assign({},e,{ref:t}))})),Check:Object(s.forwardRef)((function(e,t){return u.a.createElement(S.a,Object.assign({},e,{ref:t}))})),Clear:Object(s.forwardRef)((function(e,t){return u.a.createElement(N.a,Object.assign({},e,{ref:t}))})),Delete:Object(s.forwardRef)((function(e,t){return u.a.createElement(D.a,Object.assign({},e,{ref:t}))})),DetailPanel:Object(s.forwardRef)((function(e,t){return u.a.createElement(L.a,Object.assign({},e,{ref:t}))})),Edit:Object(s.forwardRef)((function(e,t){return u.a.createElement(z.a,Object.assign({},e,{ref:t}))})),Export:Object(s.forwardRef)((function(e,t){return u.a.createElement(q.a,Object.assign({},e,{ref:t}))})),Filter:Object(s.forwardRef)((function(e,t){return u.a.createElement(B.a,Object.assign({},e,{ref:t}))})),FirstPage:Object(s.forwardRef)((function(e,t){return u.a.createElement(I.a,Object.assign({},e,{ref:t}))})),LastPage:Object(s.forwardRef)((function(e,t){return u.a.createElement(V.a,Object.assign({},e,{ref:t}))})),NextPage:Object(s.forwardRef)((function(e,t){return u.a.createElement(L.a,Object.assign({},e,{ref:t}))})),PreviousPage:Object(s.forwardRef)((function(e,t){return u.a.createElement(k.a,Object.assign({},e,{ref:t}))})),ResetSearch:Object(s.forwardRef)((function(e,t){return u.a.createElement(N.a,Object.assign({},e,{ref:t}))})),Search:Object(s.forwardRef)((function(e,t){return u.a.createElement(H.a,Object.assign({},e,{ref:t}))})),SortArrow:Object(s.forwardRef)((function(e,t){return u.a.createElement(R.a,Object.assign({},e,{ref:t}))})),ThirdStateCheck:Object(s.forwardRef)((function(e,t){return u.a.createElement(Y.a,Object.assign({},e,{ref:t}))})),ViewColumn:Object(s.forwardRef)((function(e,t){return u.a.createElement(Q.a,Object.assign({},e,{ref:t}))}))},re=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={data:[],ownOrgsIds:[]},a.handleUpdateRole=function(e,t){if(t===a.props.user.username)O.Notification.error({title:"Error",message:"You can't change your own rights"});else{var n=e.target.checked;ae.a.updateMember(a.props.team.team.id,t,n?"LEADER":"MEMBER").then((function(){a.setState({data:a.state.data.map((function(e){return e.username===t?{username:t,isTeamLeader:n}:e}))}),O.Notification.success({title:"Success",message:"Rights have been changed"})})).catch((function(){O.Notification.error({title:"Error",message:"An error occurred while changing the rights"})}))}},a.theme=Object(b.a)({overrides:{MuiTablePagination:{select:{marginRight:"20px"}},MuiToolbar:{root:{backgroundColor:"white"}},MuiTableCell:{paddingCheckbox:{width:"auto",padding:"auto"}},MuiButtonBase:{root:{fontSize:"16px"}},MuiTableSortLabel:{active:{color:"white"}}},palette:{primary:{main:"#4caf50"},secondary:{main:"#ff9100"}}}),a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;ae.a.getMembers(this.props.team.team.id).then((function(t){e.setState({data:t.map((function(t){return{username:t.username,isTeamLeader:"LEADER"===t.teams.filter((function(t){return t.team===e.props.team.team.id}))[0].level}}))})})),this.setState({ownOrgsIds:this.props.user.organizations.filter((function(e){return!0===e.isOwned})).map((function(e){return e.id}))})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;ae.a.getMembers(e.team.team.id).then((function(a){t.setState({data:a.map((function(t){return{username:t.username,isTeamLeader:"LEADER"===t.teams.filter((function(t){return t.team===e.team.team.id}))[0].level}}))})}))}},{key:"render",value:function(){var e=this;return u.a.createElement(j.a,{theme:this.theme},u.a.createElement(E.a,{title:"Team members",options:{headerStyle:{backgroundColor:"#324157",color:"#FFF"}},icons:ne,columns:[{title:"User e-mail",field:"username",render:function(e){return u.a.createElement("p",{style:{width:"16rem"}},e.username)}},{title:"Team Leader",field:"isTeamLeader",editable:"onUpdate",render:function(t){return t&&u.a.createElement(w.a,{checked:t.isTeamLeader,onChange:function(a){return e.handleUpdateRole(a,t.username)},disabled:"MEMBER"===e.props.team.level&&!e.state.ownOrgsIds.includes(e.props.team.team.organization)||t.username===e.props.user.username,style:{float:"right"}})}}],data:this.state.data,editable:{onRowAdd:function(t){return new Promise((function(a){setTimeout((function(){ae.a.addMember(e.props.team.team.id,t.username,t.isTeamLeader?"LEADER":"MEMBER").then((function(){var n=e.state.data;n.push(t),e.setState({data:n},(function(){return a()})),O.Notification.success({title:"Success",message:"User successfully added to the team"})})).catch((function(e){403===e.response.status?O.Notification.error({title:"Error",message:"Only team leaders can add a member to your team."}):O.Notification.error({title:"Error",message:e.response.data.errorMessage||"An error occurred while adding the user to the team"})})),a()}),1e3)}))},onRowDelete:function(t){return new Promise((function(a){setTimeout((function(){ae.a.deleteMember(e.props.team.team.id,t.username).then((function(){var n=e.state.data,r=n.indexOf(t);n.splice(r,1),e.setState({data:n},(function(){return a()})),O.Notification.success({title:"Success",message:"User successfully removed from the team"})})).catch((function(){O.Notification.error({title:"Error",message:"An error occurred while deleting the user from the team"})})),a()}),1e3)}))}}}))}}]),t}(s.Component),ie=Object(m.a)(te)(re),oe=a(33),ce=Object(m.a)((function(e){return{root:{width:"300px",height:"42px",marginTop:e.spacing(3),overflowX:"auto",margin:"20px auto",display:"flex"},input:{borderRadius:4,position:"relative",backgroundColor:e.palette.background.paper,border:"1px solid #ced4da",fontSize:16,width:"400px",padding:"10px 26px 10px 12px",transition:e.transitions.create(["border-color","box-shadow"]),table:{minWidth:700}}}}))(l.a),se=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={team:null},a.selectTeam=function(e){a.setState({team:e.target.value})},a.theme=Object(b.a)({overrides:{MuiToolbar:{root:{backgroundColor:"white"}}}}),a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this.context.teams;this.setState({team:e.filter((function(e){return"Personal"!==e.team.name}))[0]})}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state.team,n=this.context,r=n.user,i=n.teams.filter((function(e){return"Personal"!==e.team.name}));return u.a.createElement("div",{className:t.bodyContainer,style:{display:"flex"}},u.a.createElement(d.a,{style:{margin:"auto"}},u.a.createElement("div",{style:{width:"fit-content",margin:"auto",paddingTop:"30px",fontSize:"35px",userSelect:"none"}},"Teams",u.a.createElement("span",{style:{width:"73px",height:"4px",margin:"8px auto 0",display:"block",backgroundColor:"#f5a623"}})),u.a.createElement("div",{style:{padding:"30px",margin:"auto"}},u.a.createElement("div",{style:{margin:"auto",width:"fit-content"}},u.a.createElement(f.a,{className:t.margin},u.a.createElement(p.a,{className:t.selectEmpty,value:a||{},onChange:function(t){return e.selectTeam(t)},input:u.a.createElement(ce,{name:"nameSelected",id:"age-customized-select"})},i.map((function(e){return u.a.createElement(h.a,{key:e.team.id,value:e},e.team.name)}))))),a&&u.a.createElement(ie,{team:a,user:r}))))}}]),t}(s.Component);se.contextType=oe.a;t.default=Object(m.a)(te)(se)}}]);
//# sourceMappingURL=18.c7e09076.chunk.js.map