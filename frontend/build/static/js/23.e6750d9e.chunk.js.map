{"version":3,"sources":["Components/mindmap/frozen/FrozenMindmapView.js"],"names":["MindmapFrozenView","state","data","children","name","currentNode","nodeKey","frozenDate","isLivePreviewOpen","livePreviewSwagger","focus","organizationId","props","location","onPreviewClick","setState","requestLivePreview","a","trackPromise","SwaggerAPI","then","result","setFocus","onFocus","model","this","history","updatedAt","classes","modelId","preview","direction","handleClass","customHandle","borderClass","customResizeBorder","style","position","right","width","maxWidth","zIndex","swagger","className","svgContainer","treeContainer","headbandFrozenVersion","Date","toLocaleString","transparentFilter","customFrozenMindmapZoom","animated","isFocus","onToolsMenuChange","in","mountOnEnter","unmountOnExit","id","color","onClick","showIconFrozenTree","Component","contextType","UserContext","withStyles","styles"],"mappings":"+SAgBMA,E,2MAGJC,MAAQ,CACNC,KAAM,CAAEC,SAAU,GAAIC,KAAM,IAC5BC,YAAa,CAAEC,QAAS,IACxBC,WAAY,GACZC,mBAAmB,EACnBC,mBAAoB,KACpBC,MAAO,OACPC,eAAgB,EAAKC,MAAMC,SAASZ,MAChC,EAAKW,MAAMC,SAASZ,MAAMU,eAC1B,M,EAgBNG,eAAiB,WAAO,IAAD,EACe,EAAKb,MAAjCO,EADa,EACbA,kBAAmBN,EADN,EACMA,KAC3B,EAAKa,SAAS,CACZP,mBAAoBA,IAGjBA,GACH,EAAKQ,mBAAmBd,I,EAI5Bc,mB,uCAAqB,WAAMd,GAAN,iBAAAe,EAAA,sDACXT,EAAsB,EAAKP,MAA3BO,kBACFG,EAAiB,EAAKV,MAAMU,eAC9B,EAAKV,MAAMU,eACX,EACAH,GAEFU,uBACEC,IAAWH,mBAAmB,CAAEd,QAAQS,GAAgBS,MAAK,SAAAC,GAC3D,EAAKN,SAAS,CAAEN,mBAAoBY,QATvB,gD,wDAerBC,SAAW,SAAAC,GACS,EAAKtB,MAAfS,QACMa,GACZ,EAAKR,SAAS,CAAEL,MAAOa,K,mFA1CN,IAEXC,EADaC,KAAKb,MAAMc,QAAxBb,SACmBZ,MAAnBuB,MAERC,KAAKV,SAAS,CACZb,KAAMsB,EAAMtB,KACZG,YAAY,eAAMmB,EAAMtB,MACxBK,WAAYiB,EAAMG,YAGpBF,KAAKT,mBAAmBQ,EAAMtB,Q,+BAoCtB,IAAD,SAQHuB,KAAKxB,MANPC,EAFK,EAELA,KACAG,EAHK,EAGLA,YACAE,EAJK,EAILA,WACAG,EALK,EAKLA,MACAF,EANK,EAMLA,kBACAC,EAPK,EAOLA,mBAPK,EAUuBgB,KAAKb,MAA3BgB,EAVD,EAUCA,QAASf,EAVV,EAUUA,SACXgB,EAAUhB,EAASZ,MAAQY,EAASZ,MAAM4B,QAAU,KAEpDC,EACJ,kBAAC,IAAD,CACEC,UAAU,IACVC,YAAaJ,EAAQK,aACrBC,YAAaN,EAAQO,mBACrBC,MAAO,CACLC,SAAU,UACVC,MAAO,IACPC,MAAO,MACPC,SAAU,MACVC,OAAQ,KAGV,kBAAC,IAAD,CACEC,QAASjC,EACTK,eAAgBW,KAAKX,kBAO3B,OACE,yBAAK6B,UAAWf,EAAQgB,cACtB,yBAAKD,UAAS,6BAAwBf,EAAQiB,gBAC5C,yBAAKF,UAAWf,EAAQkB,uBACtB,yCACU5C,EAAKE,KADf,wBACmC,IAAI2C,KAAKxC,GAAYyC,eAAe,YAGzE,yBAAKL,UAAWf,EAAQqB,oBACxB,yBAAKN,UAAS,UAXF,YAWE,YAAkBf,EAAQsB,0BACtC,kBAAC,IAAD,CACEC,UAAQ,EACRjD,KAAMA,EACNG,YAAaA,EACbwB,QAASA,EACTuB,QAAmB,SAAV1C,EACT6B,MAlBQ,YAmBRc,kBAAmB5B,KAAK4B,kBACxB9B,QAAS,kBAAM,EAAKD,SAAS,aAInC,kBAAC,IAAD,CACES,UAAU,OACVuB,GAAI9C,EACJ+C,cAAY,EACZC,eAAa,GAEZ1B,IAEDtB,GACA,kBAAC,IAAD,CACEiD,GAAG,oBACHC,MAAM,UACNC,QAAS,kBAAM,EAAK7C,kBACpB6B,UAAWf,EAAQgC,oBAEnB,kBAAC,IAAD,Y,GArIoBC,aAA1B7D,EACG8D,YAAcC,IA4IRC,sBAAWC,IAAXD,CAAmBhE","file":"static/js/23.e6750d9e.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport VisibilityIcon from '@material-ui/icons/Visibility';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport { trackPromise } from 'react-promise-tracker';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport ResizePanel from 'react-resize-panel';\r\n\r\nimport Tree from '../Tree';\r\nimport LivePreview from '../LivePreview';\r\n\r\nimport SwaggerAPI from '../../../api/SwaggerAPI';\r\n\r\nimport styles from '../../../styles/MindmapView.css';\r\nimport { UserContext } from '../../../contexts/UserContext';\r\n\r\nclass MindmapFrozenView extends Component {\r\n  static contextType = UserContext;\r\n\r\n  state = {\r\n    data: { children: [], name: '' },\r\n    currentNode: { nodeKey: '' },\r\n    frozenDate: '',\r\n    isLivePreviewOpen: true,\r\n    livePreviewSwagger: null,\r\n    focus: 'tree',\r\n    organizationId: this.props.location.state\r\n      ? this.props.location.state.organizationId\r\n      : null\r\n  };\r\n\r\n  componentDidMount() {\r\n    const { location } = this.props.history;\r\n    const { model } = location.state;\r\n\r\n    this.setState({\r\n      data: model.data,\r\n      currentNode: { ...model.data },\r\n      frozenDate: model.updatedAt\r\n    });\r\n\r\n    this.requestLivePreview(model.data);\r\n  }\r\n\r\n  onPreviewClick = () => {\r\n    const { isLivePreviewOpen, data } = this.state;\r\n    this.setState({\r\n      isLivePreviewOpen: !isLivePreviewOpen\r\n    });\r\n\r\n    if (!isLivePreviewOpen) {\r\n      this.requestLivePreview(data);\r\n    }\r\n  };\r\n\r\n  requestLivePreview = async data => {\r\n    const { isLivePreviewOpen } = this.state;\r\n    const organizationId = this.state.organizationId\r\n      ? this.state.organizationId\r\n      : 1;\r\n    if (isLivePreviewOpen) {\r\n      // Promise tracker to display a loading spinner\r\n      trackPromise(\r\n        SwaggerAPI.requestLivePreview({ data }, organizationId).then(result => {\r\n          this.setState({ livePreviewSwagger: result });\r\n        })\r\n      );\r\n    }\r\n  };\r\n\r\n  setFocus = onFocus => {\r\n    const { focus } = this.state;\r\n    if (focus !== onFocus) {\r\n      this.setState({ focus: onFocus });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      data,\r\n      currentNode,\r\n      frozenDate,\r\n      focus,\r\n      isLivePreviewOpen,\r\n      livePreviewSwagger\r\n    } = this.state;\r\n\r\n    const { classes, location } = this.props;\r\n    const modelId = location.state ? location.state.modelId : null;\r\n\r\n    const preview = (\r\n      <ResizePanel\r\n        direction=\"w\"\r\n        handleClass={classes.customHandle}\r\n        borderClass={classes.customResizeBorder}\r\n        style={{\r\n          position: 'inherit',\r\n          right: '0',\r\n          width: '60%',\r\n          maxWidth: '80%',\r\n          zIndex: 10\r\n        }}\r\n      >\r\n        <LivePreview\r\n          swagger={livePreviewSwagger}\r\n          onPreviewClick={this.onPreviewClick}\r\n        />\r\n      </ResizePanel>\r\n    );\r\n\r\n    const treeWidth = 'full-tree';\r\n\r\n    return (\r\n      <div className={classes.svgContainer}>\r\n        <div className={`relative-container ${classes.treeContainer}`}>\r\n          <div className={classes.headbandFrozenVersion}>\r\n            <p>\r\n              {`API ${data.name} - frozen on ${new Date(frozenDate).toLocaleString('en-EN')}`}\r\n            </p>\r\n          </div>\r\n          <div className={classes.transparentFilter} />\r\n          <div className={`${treeWidth} ${classes.customFrozenMindmapZoom}`}>\r\n            <Tree\r\n              animated\r\n              data={data}\r\n              currentNode={currentNode}\r\n              modelId={modelId}\r\n              isFocus={focus === 'tree'}\r\n              width={treeWidth}\r\n              onToolsMenuChange={this.onToolsMenuChange}\r\n              onFocus={() => this.setFocus('tree')}\r\n            />\r\n          </div>\r\n        </div>\r\n        <Slide\r\n          direction=\"left\"\r\n          in={isLivePreviewOpen}\r\n          mountOnEnter\r\n          unmountOnExit\r\n        >\r\n          {preview}\r\n        </Slide>\r\n        {!isLivePreviewOpen && (\r\n          <IconButton\r\n            id=\"previewShowButton\"\r\n            color=\"primary\"\r\n            onClick={() => this.onPreviewClick()}\r\n            className={classes.showIconFrozenTree}\r\n          >\r\n            <VisibilityIcon />\r\n          </IconButton>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nexport default withStyles(styles)(MindmapFrozenView);\r\n"],"sourceRoot":""}